<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
  <title>REMO - rule editor for modsecurity</title>
  <%= stylesheet_link_tag "remo", :media => "all" %>
<%= javascript_include_tag :defaults %>
 <script type="text/javascript">

function toggleRequestDetails(id)
{
  Element.toggle('request-item_' + id + '-details');
  Element.toggle('request-item_' + id + '-collapsed');
  Element.toggle('request-item_' + id + '-expanded');
  return false;
}
function toggleRequestHeaders(id)
{
  Element.toggle('request-item_' + id + '_headers_body');
  Element.toggle('request-item_' + id + '_headers-collapsed');
  Element.toggle('request-item_' + id + '_headers-expanded');
  return false;
}
function toggleRequestPostparameters(id)
{
  Element.toggle('request-item_' + id + '_postparameters_body'); 
  Element.toggle('request-item_' + id + '_postparameters-collapsed');
  Element.toggle('request-item_' + id + '_postparameters-expanded');
  return false;
}
function toggleRequestQuerystringparameters(id)
{
  Element.toggle('request-item_' + id + '_querystringparameters_body'); 
  Element.toggle('request-item_' + id + '_querystringparameters-collapsed');
  Element.toggle('request-item_' + id + '_querystringparameters-expanded');
  return false;
}
function toggleRequestCookieparameters(id)
{
  Element.toggle('request-item_' + id + '_cookieparameters_body'); 
  Element.toggle('request-item_' + id + '_cookieparameters-collapsed');
  Element.toggle('request-item_' + id + '_cookieparameters-expanded');
  return false;
}
function getwindowheight() 
{
  // taken from http://www.howtocreate.co.uk/tutorials/javascript/browserwindow
  var myHeight = 0;
  if( typeof( window.innerWidth ) == 'number' ) {
    //Non-IE
    myHeight = window.innerHeight;
  } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
    //IE 6+ in 'standards compliant mode'
    myHeight = document.documentElement.clientHeight;
  } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
    //IE 4 compatible
    myHeight = document.body.clientHeight;
  }
  return myHeight;
}
function elementheight(id) 
{   
  return document.getElementById(id).style.height
}
function adjustframes() 
{   
  var winheight, divheight;
  winheight = getwindowheight();
  divheight = winheight - 170 - elementheight('flash-frame') - elementheight('rules-statusarea') - elementheight('rules-toolsetarea');
  document.getElementById('rules-mainarea').style.height = divheight + "px";
  document.getElementById('source-mainarea').style.height = divheight + "px";
}

</script>
</head>

<body id="remo" onload="javascript:adjustframes()">
  <div id="banner" class="header">
    <div id="title"><h1><a href="http://remo.netnea.com">remo</a> - rule editor for <a href="http://www.modsecurity.org">modsecurity</a></h1><span class="remo-version">Release <%= get_release_version -%></span></div>
    <div id="logodiv" align="right"><a href="http://remo.netnea.com"><img id="logo" src="/images/logo.png"/></a></div>
  </div>
  <div id="flash-frame">
    <div id="flash-notice" class="<%= if flash[:ok] then "flash-ok" else "flash-nok" end %>" style="display: <%= if flash[:notice].nil? then "none" else "inline" end %>;">
      <%= flash[:notice] -%>
    </div>
  </div>
  <div id="maindiv">
    <div id="source" class="maincolumn">
      <div id="source-toolsetarea" class="toolsetarea">
        area will be used later
      </div>
      <div id="source-mainarea" class="mainarea">
        area will be used later
      </div>
      <div id="source-statusarea" class="statusarea">
        none
      </div>
    </div>
    <div id="rules" class="maincolumn">
      <div id="rules-toolsetarea" class="toolsetarea">
        <%= render(:partial => "rules_toolset", :collection => @rules_toolset_buttons) -%>
      </div>
      <div id="rules-mainarea" class="mainarea">
      <%= yield :layout %>
      </div>
      <div id="rules-statusarea" class="statusarea">
        <div><%= h(@rules_status) %></div>
      </div>
    </div>
  </div>
</body>
</html>

